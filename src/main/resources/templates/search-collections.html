<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head th:replace="~{fragments :: head}"></head>
<div th:replace="fragments :: page-header"></div>
<script>window.onload = screenMode()</script>
<script type="text/javascript" th:src="@{/javascript/search-collections.js}"></script>

<body class="container body-content search-collections">

    <h1 th:text="${mainTitle}"></h1>

    <form th:action="@{/search-collections}" method="post">
        <p>
            <span th:each="column : ${columns}">
                <input
                    type="radio"
                    name="searchType"
                    th:id="${column.key}"
                    th:value="${column.key}"
                    th:checked="${column.key == 'all'}"/>
                <label th:for="${column.key}" th:text="${column.value}"></label>
            </span>
        </p>
        <p>
            <label for="searchTerm">Keyword:</label>
            <input name="searchTerm" id="searchTerm"/>
            <input type="submit" value="Search" />
        </p>
    </form>

    <hr>

    <span id="movieFilterBlock">
        <input type="text" id="movieInput" onkeyup="movieCollectionFilter()" placeholder="Filter Movie Collections By:" title="Enter Filter Term">
        <input type="radio" id="keyword" name="movieFilter" value="keyword">
        <label for="keyword">Keyword</label>
        <input type="radio" id="director" name="movieFilter" value="director">
        <label for="director">Director</label>
        <input type="radio" id="genre" name="movieFilter" value="genre">
        <label for="genre">Genre</label>
        <input type="radio" id="collector" name="movieFilter" value="collector">
        <label for="collector">Collector</label>
    </span>

    <table id="movieCollectionTable" class="collection-listing">
        <thead>
            <tr id="movieColumnBlock">
                <th></th>
                <th id="movieCollectionColumnHeader">Movie Collections</th>
                <th id="directorStrings" style="width: 0px; padding: 0px"></th>
                <th id="genre1Strings" style="width: 0px; padding: 0px"></th>
                <th id="genre2Strings" style="width: 0px; padding: 0px"></th>
                <th id="genre3Strings" style="width: 0px; padding: 0px"></th>
                <th id="collectorStrings" style="width: 0px; padding: 0px"></th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="movieCollection : ${movieCollections}">
                <td>
                    <span class="toggleIcon" onclick="toggleCollectionDetails(event, this.parentElement.nextElementSibling.querySelector('.movieCollectionStrip')); toggleIcon(this)">▶</span>
                </td>
                <td>
                    <h3 class="movieCollectionStrip">
                        <a class="movieCollectionLink" th:href="@{'/collections/view-movie-collection/' + ${movieCollection.id}}" th:text="${movieCollection.name}"></a>
                    </h3>

                    <div style="display:none;">
                        <i>
                            <p th:text="${movieCollection.description}"></p>
                        </i>
                        <br>
                        <ul th:each="movie : ${movieCollection.movies}">
                            <li>
                                <a class="movieInfo" th:href="@{'/movies/details/' + ${movie.title} + '-' + ${movie.year}}" th:text="${movie.title} + ' -  Directed by: ' + ${movie.director} + ', ' + ${movie.year}"></a>
                            </li>
                        </ul>
                        <br>
                        <p>
                            <a class="createdBy" th:href="@{'/profile/' + ${movieCollection.getUser().getUsername()}}" th:text="${'Created by: ' + movieCollection.getUser().getUsername()}"></a>
                        </p>
                    </div>
                </td>
                <td id="movieColDirectors", style="display:none;">Directors in Collection:>
                    <ul th:each="movie : ${movieCollection.movies}">
                        <li id="directorFilterString", style="display:none"
                            th:text="${movie.director}">
                        </li>
                    </ul>
                </td>
                <td id="movieColGenre" style="display:none">Genres in Collection:>
                    <ul th:each="movie : ${movieCollection.movies}">
                        <li id="genreFilterString" style="display:none"
                            th:text="${movie.genre}">
                        </li>
                    </ul>
                </td>
                <td id="movieColGenre2", style="display:none">Genre2s in Collection:>
                    <ul th:each="movie : ${movieCollection.movies}">
                        <li id="genre2FilterString" style="display:none"
                            th:text="${movie.genre2}">
                        </li>
                    </ul>
                <td id="movieColGenre3", style="display:none">Genre3s in Collection:>
                    <ul th:each="movie : ${movieCollection.movies}">
                        <li id="genre3FilterString" style="display:none"
                            th:text="${movie.genre3}">
                        </li>
                    </ul>
                </td>
                <td id="movieColCollector", style="display:none">Collector in Collection:>
                    <ul th:each="movie : ${movieCollection.movies}">
                        <li id="movieCollectorFilterString", style="display:none"
                            th:text="${movieCollection.getUser().getUsername()}">
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>

    <br id="movieDivider" /><br>

    <span id="bookFilterBlock">
        <input type="text" id="bookInput" onkeyup="bookCollectionFilter()" placeholder="Filter Book Collections By.." title="Enter Filter Term">
        <input type="radio" id="book-keyword" name="bookFilter" value="keyword">
        <label for="keyword">Keyword</label>
        <input type="radio" id="author" name="bookFilter" value="author">
        <label for="author">Author</label>
        <input type="radio" id="book-genre" name="bookFilter" value="genre">
        <label for="genre">Genre</label>
        <input type="radio" id="book-collector" name="bookFilter" value="collector">
        <label for="collector">Collector</label>
    </span>

    <table id="bookCollectionTable" class="collection-listing">
        <thead>
            <tr id="bookColumnBlock">
                <th></th>
                <th id="bookCollectionColumnHeader">Book Collections</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="bookCollection : ${bookCollections}">
                <td>
                    <span class="toggleIcon" onclick="toggleCollectionDetails(event, this.parentElement.nextElementSibling.querySelector('.bookCollectionStrip')); toggleIcon(this)">▶</span>
                </td>
                <td>
                    <h3 class="bookCollectionStrip">
                        <a class="bookCollectionLink" th:href="@{'/collections/view-book-collection/' + ${bookCollection.id}}" th:text="${bookCollection.name}"></a>
                    </h3>

                    <div style="display:none;">
                        <i>
                            <p th:text="${bookCollection.description}"></p>
                        </i>
                        <br>
                        <ul th:each="book : ${bookCollection.books}">
                            <li>
                                <a class="bookInfo" th:href="@{'/books/details/' + ${book.title}}" th:text="${book.title} + ' -  Author: ' + ${book.author} + ', ' + ${book.year}"></a>
                            </li>
                        </ul>
                        <br>
                        <a class="createdBy" th:href="@{'/collector/' + ${bookCollection.getUser().getUsername()}}" th:text="${'Created by: ' + bookCollection.getUser().getUsername()}"></a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <br id="bookDivider" /><br>

    <span id="gameFilterBlock">
        <input type="text" id="gameInput" onkeyup="gameCollectionFilter()" placeholder="Filter Game Collections By.." title="Enter Filter Term">
        <input type="radio" id="game-keyword" name="gameFilter" value="keyword">
        <label for="keyword">Keyword</label>
        <input type="radio" id="creator" name="gameFilter" value="creator">
        <label for="creator">Creator</label>
        <input type="radio" id="game-genre" name="gameFilter" value="genre">
        <label for="genre">Genre</label>
        <input type="radio" id="game-collector" name="gameFilter" value="collector">
        <label for="collector">Collector</label>
    </span>

    <table id="gameCollectionTable" class="collection-listing">
        <thead>
            <tr id="gameColumnBlock">
                <th></th>
                <th id="gameCollectionColumnHeader">Game Collections</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="gameCollection : ${gameCollections}">
                <td>
                    <span class="toggleIcon" onclick="toggleCollectionDetails(event, this.parentElement.nextElementSibling.querySelector('.gameCollectionStrip')); toggleIcon(this)">▶</span>
                </td>
                <td>
                    <h3 class="gameCollectionStrip">
                        <a class="gameCollectionLink" th:href="@{'/collections/view-game-collection/' + ${gameCollection.id}}" th:text="${gameCollection.name}"></a>
                    </h3>

                    <div style="display:none;">
                        <i>
                            <p  th:text="${gameCollection.description}"></p>
                        </i>
                        <br>
                        <ul th:each="game : ${gameCollection.games}">
                            <li>
                                <a th:href="@{'/games/details/' + ${game.title}}" th:text="${game.title}"></a>
                            </li>
                        </ul>
                        <br>
                        <p>
                            <a class="createdBy" th:href="@{'/collector/' + ${gameCollection.getUser().getUsername()}}" th:text="${'Created by: ' + gameCollection.getUser().getUsername()}"></a>
                        </p>
                    </div>
                </td>

            </tr>
        </tbody>
    </table>
    <br>
    <script>
        toggleMovieTableDisplay();
        toggleBookTableDisplay();
        toggleGameTableDisplay();
    </script>

</body>
</html>
